<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>NEOS | ìŠ¤í„°ë”” ìƒì„¸ë³´ê¸°</title>
    <link rel="stylesheet" href="/css/study/questionStudy.css">
    <link rel="stylesheet" href="/css/study/studyModal.css">
    <link rel="stylesheet" href="/css/fix/header.css">
    <link rel="stylesheet" href="/css/fix/loginHeader.css">
    <link rel="stylesheet" href="/css/fix/chatting.css">
    <link rel="icon" type="image/x-icon" href="/images/fix/favicon.png">
</head>
<style>
    .updatePostBtn_1j1{
        display: none;
    }
    .cancelBtn_1j1, .updatePost, .cancelTry{
        display: none;
    }

</style>
<body>
<script th:inline="javascript">
    const userId = [[${session.loginUser}]];
    if(!userId){
        alert("ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.")
        location.href="/study/list";
    }
</script>
    <header th:replace="/app/fix/header.html :: header"></header>
    <!-- ë¬¸ì˜ í˜ì´ì§€ START-->
    <div id="_next" th:object="${study}">
        <section>
            <div class="projectPageHeaderWrap">
                <div class="projectPurposeWrap">
                    <div>
                        <h2 class="rightTxt">ìŠ¤í„°ë””</h2>
                    </div>
                </div>
                <div class="projectPageHeaderContent">
                    <h2 class="projectTit" th:text="*{studyTitle}"></h2>
                    <li class="projectLeaderWrap">
                        <div class="userIdWrap">
                            <div class="leaderImg"><a href="#"><img width="20px"
                                                                    height="20px"
                                                                    th:src="${writer.userFile}"
                                                                    alt="ì¶”ì¶”ì¶”"></a></div>
                            <div class="rightTxt userId">
                                <h2 class="userIdTxt" th:text="*{userNickName}"></h2><span class="confirmPhoneTxt">(ëŒ€í•™êµ ì¸ì¦)</span>
                                <div class="idHoverMenu">
                                    <ul>
                                        <li><a href="#">í”„ë¡œí•„ ìƒì„¸</a></li>
                                        <li class="chatTop"><a>1:1 ëŒ€í™”</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                    <div class="statusTagWrap">
                        <th:block th:if="*{StudyRecruitStatus.toString() == 'RECRUITING'}">
                            <span class="statusTag gray">ì§„í–‰ ì¤‘</span>
                        </th:block>
                        <th:block th:unless="*{StudyRecruitStatus.toString() == 'RECRUITING'}">
                            <span class="statusTag white">ëª¨ì§‘ì™„ë£Œ</span>
                        </th:block>
                        <div class="modifyBtn" style="cursor: pointer"><a><img loading="lazy"
                                                                               src="https://letspl.me/assets/images/ic-profile-modify.png"
                                                                               alt="ìˆ˜ì •ë²„íŠ¼" style="vertical-align: middle;"></a></div>
                    </div>
                </div>
            </div>
            <div class="projectPageWrap">
                <div class="projectDetailContents contents">
                    <div class="projectTabMenu clearfix">
                        <ul>
                            <li><a name="#info" class="" th:href="@{/study/list/{id}(id=${study.studyId})}">ì •ë³´</a></li>
                            <li><a name="question" class="active">ì§ˆë¬¸(&nbsp<span id="size_1j" th:text="${questions.size()}"></span><span>&nbsp)</span>
                            </a></li>
                            <li><a name="work" class="">ì¼ê°</a></li>
                            <li><a name="feed" class="">í”¼ë“œ</a></li>
                            <li><a name="mgmt" class="">ê´€ë¦¬</a></li>
                        </ul>
                    </div>
                    <div class="projectDetailWrap">
                        <div class="projectTab projectFeedContents active">
                            <h3 class="tabTit qna">ğŸ‘ ì´ ëª¨ì„ì— ì‘ì›Â·ì§ˆë¬¸ì„ ì˜¬ë ¤ì£¼ì„¸ìš”!</h3>
                            <form th:action="@{/study/question/write}" method="post" id="questionPostForm" name="questionPostForm">
                            <div class="section feedInputSection qnaInputSection">
                                <input type="hidden" name="userId" th:value="${session.loginUser}">
                                <input type="hidden" id="studyId" name="studyId" th:value="${study.studyId}">
                                <div class="feedInputWrap"><textarea id="studyQuestionContent" class="textarea" name="studyQuestionContent" placeholder="ì´ ëª¨ì„ì— ì‘ì›Â·ì§ˆë¬¸ì„ ì˜¬ë ¤ì£¼ì„¸ìš”!"
                                                                     maxlength="499" rows="2"></textarea></div>
                                <div class="feed btnWrap"><p class="count"><span>12</span>/<span>500</span></p>
                                    <div>
                                        <button type="button" id="questionPostBtn_1j" class="whiteBtn">ë“±ë¡</button>
                                        <button type="button" class="whiteBtn blackBtn">ì·¨ì†Œ</button>
                                    </div>
                                </div>
                            </div>
                            </form>
                            <div id="questionWrapper_1j">
                                <th:block th:each="question : ${questions}">
                                    <div class="section feedUploadedSection" th:id="${question.getStudyQuestionId()}" th:object="${question}">
                                        <div class="feedUploadWrap">
                                            <div class="feedContentsWrap">
                                                <div class="top"><a href="#" target="_blank">
                                                    <div class="thumb"><img loading="lazy" width="44px" height="44px"
                                                                            th:src="*{studyQuestionWriter.getUserFile()}"
                                                                            alt="user_image"></div>
                                                </a>
                                                    <div class="name"><h2 class="profileName"><span class="profileName" th:text="*{studyQuestionWriter.getUserNickName()}"></span>
                                                        <div class="hoverView">
                                                            <ul>
                                                                <li><a href="/people/ROSA" target="_blank">í”„ë¡œí•„ ìƒì„¸</a></li>
                                                                <li class="questionChat"><a>1:1 ëŒ€í™”</a></li>
                                                                <!--<li><a>ëª¨ì„ ì´ˆëŒ€</a></li>-->
                                                            </ul>
                                                        </div>
                                                    </h2><span class="createdDate" th:text="*{createdDate}"></span></div>
                                                </div>
                                                <div class="feedContents"><textarea class="studyQuestionContent_1j" disabled="" maxlength="1000"
                                                                                    style="font-size: 0.875rem; height: 62px !important;" th:text="*{studyQuestionContent}"></textarea>
                                                </div>
                                                <th:block th:if="${question.getStudyQuestionWriter().getUserId() == session.loginUser}">
                                                    <div class="btnWrap">
                                                       <button class="feedBtn txtBtn updateBtn_1j1">ìˆ˜ì •</button>
                                                       <button class="feedBtn txtBtn updatePostBtn_1j1">ë“±ë¡</button>
                                                        <div class="divider"><input type="hidden" class="questionId" th:value="*{studyQuestionId}"></div>
                                                        <button class="feedBtn txtBtn deleteBtn_1j1" >ì‚­ì œ</button>
                                                        <button class="feedBtn txtBtn cancelBtn_1j1" >ì·¨ì†Œ</button>
                                                    </div>
                                                </th:block>
                                                <div class="bottom"><a class="feedReply active">ëŒ“ê¸€ ì—´ê¸°</a><span class="replayCount" th:text="*{replyLength}"></span></div>
                                            </div>
                                            <div class="replyWrap">
                                                <div class="replyWrapContent">
                                                </div>
                                                <div class="replayInput">
                                                    <div class="profileThumb"><img loading="lazy" width="44px" height="44px"
                                                                                   th:src="${nowUser.getUserFile()}"
                                                                                   alt="user_image"></div>
                                                    <div class="txtInput"><textarea class="replyPostTextArea_1j" type="text" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."
                                                                                    maxlength="500" rows="4"></textarea>
                                                        <div class="btnWrap">
                                                            <button class="whiteBtn replyPost_1j">ë“±ë¡</button>
                                                            <button class="whiteBtn" style="margin-left: 8px">ì·¨ì†Œ</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </th:block>

<!--                            <div class="section feedUploadedSection">-->
<!--                                <div class="feedUploadWrap">-->
<!--                                    <div class="feedContentsWrap">-->
<!--                                        <div class="top"><a href="/people/ì¶”ì¶”ì¶”" target="_blank">-->
<!--                                            <div class="thumb"><img loading="lazy" width="44px" height="44px"-->
<!--                                                                    src="https://letspl.me/assets/images/prof-no-img.png"-->
<!--                                                                    alt="user_image"></div>-->
<!--                                        </a>-->
<!--                                            <div class="name">-->
<!--                                                <h2 class="profileName">ì¶”ì¶”ì¶”-->
<!--                                                    <div class="hoverView">-->
<!--                                                        <ul>-->
<!--                                                            <li><a href="/people/ì¶”ì¶”ì¶”" target="_blank">í”„ë¡œí•„ ìƒì„¸</a></li>-->
<!--                                                            <li class="questionChat"><a>1:1 ëŒ€í™”</a></li>-->
<!--                                                            &lt;!&ndash;<li><a>ëª¨ì„ ì´ˆëŒ€</a></li>&ndash;&gt;-->
<!--                                                        </ul>-->
<!--                                                    </div>-->
<!--                                                </h2>-->
<!--                                                <span>22.11.14 02:07</span>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="feedContents"><textarea disabled="" maxlength="1000"-->
<!--                                                                            style="font-size: 0.875rem; height: 62px !important;">í”„ë¡œì íŠ¸ í™”ì´íŒ…!</textarea>-->
<!--                                        </div>-->
<!--                                        <div class="btnWrap">-->
<!--                                            <button class="feedBtn txtBtn">ìˆ˜ì •</button>-->
<!--                                            <div class="divider"></div>-->
<!--                                            <button class="feedBtn txtBtn">ì‚­ì œ</button>-->
<!--                                        </div>-->
<!--                                        <div class="bottom"><a class="feedReply active">ëŒ“ê¸€ ì—´ê¸°</a><span-->
<!--                                                class="replayCount">0</span></div>-->
<!--                                    </div>-->
<!--                                    <div class="replyWrap">-->
<!--                                        <div class="replayInput">-->
<!--                                            <div class="profileThumb"><img loading="lazy" width="44px" height="44px"-->
<!--                                                                           src="https://letspl.me/assets/images/prof-no-img.png"-->
<!--                                                                           alt="user_image"></div>-->
<!--                                            <div class="txtInput"><textarea type="text" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."-->
<!--                                                                            maxlength="500" rows="4"></textarea>-->
<!--                                                <div class="btnWrap">-->
<!--                                                    <button class="whiteBtn">ë“±ë¡</button>-->
<!--                                                    <button class="whiteBtn" style="margin-left: 8px">ì·¨ì†Œ</button>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="projectRightInfoContetns">
                    <div class="projectRightInfoWrap">
                        <div class="basicInfoWrap infoWrap">
                            <p class="checkboxTit">ë¦¬ë” ì •ë³´</p>
                            <div class="leaderInfo">
                                <div class="userIdWrap">
                                    <div class="leaderImg"><a class="leaderImgWrap"
                                                              href="/people/%EC%B6%94%EC%B6%94%EC%B6%94"><img
                                            width="20px"
                                            height="20px"
                                            th:src="${writer.userFile}"
                                            alt="ì¶”ì¶”ì¶”"></a>
                                    </div>
                                    <div class="rightBox">
                                        <h2 class="userIdTxt"><span th:text="${writer.userNickName}"></span>
                                            <div class="idHoverMenu">
                                                <ul>
                                                    <li><a href="/people/%EC%#%94%EC%B6%94%EC%B6%94">í”„ë¡œí•„ ìƒì„¸</a></li>
                                                    <li class="chatReader"><a>1:1 ëŒ€í™”</a></li>
                                                </ul>
                                            </div>
                                        </h2>
                                        <span
                                                class="proejctReactionRateTxt"><span class="leftTxt">ëŒ€í•™êµ : </span><span
                                                class="rightTxt" th:text="${writer.collegeName}">
                                                    </span></span>
                                        <div class="heartAndShareWrap"><a class="heartWrap viewCount">
                                            <svg
                                                    xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                    viewBox="0 0 16 16" fill="none">
                                                <path
                                                        d="M8 2.48901C6.27297 2.48988 4.58622 3.01069 3.15934 3.98365C1.73246 4.9566 0.631569 6.33661 0 7.94401C0.630962 9.55179 1.73172 10.9321 3.15875 11.9051C4.58577 12.878 6.27285 13.3985 8 13.3985C9.72715 13.3985 11.4142 12.878 12.8413 11.9051C14.2683 10.9321 15.369 9.55179 16 7.94401C15.3684 6.33661 14.2675 4.9566 12.8407 3.98365C11.4138 3.01069 9.72703 2.48988 8 2.48901V2.48901ZM8 11.58C7.28087 11.58 6.57788 11.3668 5.97995 10.9672C5.38201 10.5677 4.91597 9.99984 4.64077 9.33545C4.36557 8.67106 4.29357 7.93998 4.43386 7.23466C4.57416 6.52935 4.92046 5.88148 5.42896 5.37297C5.93746 4.86447 6.58534 4.51817 7.29065 4.37788C7.99597 4.23758 8.72704 4.30959 9.39144 4.58479C10.0558 4.85999 10.6237 5.32602 11.0232 5.92396C11.4228 6.5219 11.636 7.22488 11.636 7.94401C11.6355 8.90818 11.2522 9.8327 10.5705 10.5145C9.88869 11.1962 8.96416 11.5795 8 11.58ZM8 5.76201C7.56844 5.76201 7.14657 5.88999 6.78775 6.12975C6.42892 6.36951 6.14925 6.71029 5.9841 7.109C5.81894 7.50771 5.77573 7.94643 5.85993 8.3697C5.94412 8.79297 6.15194 9.18176 6.45709 9.48692C6.76225 9.79208 7.15105 9.99989 7.57431 10.0841C7.99758 10.1683 8.43631 10.1251 8.83502 9.95992C9.23372 9.79477 9.57451 9.5151 9.81427 9.15627C10.054 8.79744 10.182 8.37557 10.182 7.94401C10.1824 7.65736 10.1262 7.37344 10.0167 7.10853C9.90719 6.84362 9.74648 6.60292 9.54379 6.40023C9.34109 6.19753 9.10039 6.03682 8.83548 5.9273C8.57057 5.81779 8.28666 5.76162 8 5.76201Z"
                                                        fill="#A4A4B4"></path>
                                            </svg>
                                            <span th:text="*{studyView}"></span></a>
                                            <a class="heartWrap">
                                                <div class="favoriteSymbol">
                                                    <div class="favorite rightFavorite"></div>
                                                </div>
                                                <span class="favoriteNumber">2</span>
                                            </a>
                                            <a class="shareWrap"><img loading="lazy"
                                                                      src="https://letspl.me/assets/images/ic-share.png"
                                                                      alt="URL ê³µìœ í•˜ê¸°"><span>ê³µìœ í•˜ê¸°</span></a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="projectBeginDate infoWrap">
                            <p class="checkboxTit">ìŠ¤í„°ë””
                                <!-- -->ê¸°ê°„
                            </p>
                            <h3 class="tabTxt">
                                <span th:text="*{studyStartDate}"></span>
                                <span> ~ </span>
                                <span th:text="*{studyEndDate}"></span>
                                <span>( </span><span th:text="${minusDay}"></span><span>ì¼ )</span>
                            </h3>
                        </div>
                        <div class="projectBeginDate infoWrap">
                            <h3 class="checkboxTit">ìŠ¤í„°ë””
                                <!-- -->
                                <!-- -->ë¶„ì•¼
                            </h3>
                            <h3 class="tabTxt"><span th:text="*{studyType}"></span><span>ê³¼ëª©</span><span> / </span><span th:text="*{studyKeyword}"></span></h3>
                        </div>
                        <div class="infoWrap watchedLetsplerWrap">
                            <h3 class="checkboxTit">êµ¬ë…ì¤‘ì¸ ë„¤ì˜¤ìŠ¤ì¸&nbsp;<span>0
                                <!-- -->ëª…
                                    </span></h3>
                            <ul>
                                <!--                                <li class="hoverNameWrap">-->
                                <!--                                    <div class="hoverName">-->
                                <!--                                        <p><span>[L6]</span><span>sun9hyun</span></p>-->
                                <!--                                    </div>-->
                                <!--                                    <div class="imgWrap"><img loading="lazy"-->
                                <!--                                                              src="https://phinf.pstatic.net/contact/20220629_138/1656481654516fqNNk_PNG/profileImage.png"-->
                                <!--                                                              alt="sun9hyun"></div>-->
                                <!--                                </li>-->
                                <!--                                <li class="hoverNameWrap">-->
                                <!--                                    <div class="hoverName">-->
                                <!--                                        <p><span>[L6]</span><span>ROSA</span></p>-->
                                <!--                                    </div>-->
                                <!--                                    <div class="imgWrap"><img loading="lazy"-->
                                <!--                                                              src="https://phinf.pstatic.net/contact/20220616_30/1655372073682zvrW8_GIF/%B0%B6%B7%B0%BD%C3.gif"-->
                                <!--                                                              alt="ROSA"></div>-->
                                <!--                                </li>-->
                            </ul>
                            <button class="subscribeBtn active">êµ¬ë…í•˜ê¸°</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- ë¬¸ì˜ í˜ì´ì§€ END-->

    <!-- ê´€ë ¨ ëª¨ë‹¬ START-->
    <div class="modalWrapOpen">
        <!--ë³¸ì¸ì´ ì‘ì„±í•œ ëŒ“ê¸€, ì§ˆë¬¸ ì‚­ì œ-->
        <div class="modalWrap modal1" id="deleteModal_1j">
            <p class="modalTit">ì‘ì„±í•˜ì‹  ê¸€ì˜ ì‚­ì œë¥¼ í™•ì¸í•©ë‹ˆë‹¤</p>
            <button class="closeBtn">
                <img loading="lazy" src="https://letspl.me/assets/icon/ic-close.svg" alt="close" class="closeBtnImg">
            </button>
            <div class="modalContent">
                <p>ì‘ì„±í•˜ì‹  ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            </div>
            <input type="hidden" id="questionIdForDelete" name="questionId" value="">
            <div class="btnWrap doubleBtnWrap">
                <button type="button" class="btn whiteBtn">ì•„ë‹ˆìš”</button>
                <button type="button" class="btn blueBtn" id="deleteBtn_11j">ì˜ˆ</button>
            </div>
        </div>
<!--    ëŒ“ê¸€ ì‚­ì œ ëª¨ë‹¬-->
        <div class="modalWrap modal1" id="deleteModal_2j">
            <p class="modalTit">ì‘ì„±í•˜ì‹  ëŒ“ê¸€ì˜ ì‚­ì œë¥¼ í™•ì¸í•©ë‹ˆë‹¤</p>
            <button class="closeBtn">
                <img loading="lazy" src="https://letspl.me/assets/icon/ic-close.svg" alt="close" class="closeBtnImg">
            </button>
            <div class="modalContent">
                <p>ì‘ì„±í•˜ì‹  ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            </div>
            <input type="hidden" id="questionIdForDelete2" name="questionId" value="">
            <div class="btnWrap doubleBtnWrap">
                <button type="button" class="btn whiteBtn">ì•„ë‹ˆìš”</button>
                <button type="button" class="btn blueBtn" id="deleteBtn_21j">ì˜ˆ</button>
            </div>
        </div>
        <!--ìŠ¤í„°ë”” êµ¬ë… ë²„íŠ¼ í´ë¦¬ ì‹œ, ìƒì„¸ë³´ê¸° ì „ì²´ ê³µí†µìœ¼ë¡œ ì‚­ì œ X-->
        <div class="modalWrap modal2">
            <p class="modalTit studyTit">ì‚¶ì— í™œë ¥ì„ ì£¼ëŠ” Done Listì„</p>
            <p class="modalTit">êµ¬ë…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <button class="closeBtn">
                <img loading="lazy" src="https://letspl.me/assets/icon/ic-close.svg" alt="close" class="closeBtnImg">
            </button>
            <div class="modalContent">
                <p>êµ¬ë…í•˜ì‹œë©´, ê´€ë ¨ëœ ì •ë³´ë‚˜</p>
                <p>í™ë³´ ì»¨í…ì¸ ê°€ SMS/ì´ë©”ì¼/í‘¸ì‰¬ì„ í†µí•´ ì •ê¸°ì ìœ¼ë¡œ ë°°ì†¡ë©ë‹ˆë‹¤</p>
                <p>ìë™ìœ¼ë¡œ NEOS ê´‘ê³ ìˆ˜ì‹ ë™ì˜ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤</p>
            </div>
            <div class="btnWrap doubleBtnWrap">
                <button class="btn whiteBtn">ì•„ë‹ˆìš”</button>
                <button class="btn blueBtn okBtn">ì˜ˆ</button>
            </div>
        </div>

    </div>
    <!-- ê´€ë ¨ ëª¨ë‹¬ END-->

    <div th:replace="/app/fix/chattingAll.html :: chattingAll"></div>
    <div th:replace="/app/fix/footer.html :: footer"></div>
</body>
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
<script src="/js/study/questionStudy.js"></script>
<script src="/js/study/modalStudy.js"></script>
<script src="/js/fix/chatting.js"></script>
<script src="/js/fix/login.js"></script>
<script src="/js/fix/header.js"></script>
<script>
    const $postBtn = $("#questionPostBtn_1j");
    $postBtn.on("click",function () {
        if(!$("#studyQuestionContent").val()){
            alert("ë¹ˆ ë‚´ìš©ì€ ë“±ë¡í•˜ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return;
        }
        $("#questionPostForm").submit();
    })

    const $deleteBtn = $(".deleteBtn_1j1");
    $deleteBtn.on("click",function () {
        const id = $(this).prev().find(".questionId").val();
        $("#questionIdForDelete").val(id);
        $(".modalWrapOpen").show();
        $("#deleteModal_1j").show();
    })

    $("#deleteBtn_11j").on("click",function () {
        const id = $(this).parent().prev().val();
        $.ajax({
            url:"/quest/"+id,
            type:"delete",
            success:function(result){
                if(result == 'delete success'){
                    $("#"+id).remove();
                    var num = parseInt($("#size_1j").text())-1;
                    $("#size_1j").text(num);
                }
            }
        })
    })
    globalThis.content = undefined;
    var check = false;
    $(".updateBtn_1j1").on("click",function () {
        if(!check){
            globalThis.content = $(this).parent().prev().find("textarea").val();
            $(this).parent().prev().find("textarea").attr("disabled", false)
                .css("height", "127px");
            $(this).hide();
            $(this).next().show();
           $(this).closest(".btnWrap").find(".deleteBtn_1j1").hide();
            $(this).closest(".btnWrap").find(".deleteBtn_1j1").next().show();
            check=true
        }else{
            alert("í•œë²ˆì— í•˜ë‚˜ì˜ ê¸€ë§Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.")
        }
    })

    $(".cancelBtn_1j1").on("click",function () {
        $(this).parent().prev().find("textarea").attr("disabled", true)
            .css("height", "62px");

        $(this).parent().prev().find("textarea").val(globalThis.content)
        $(this).hide();
        $(this).prev().show();
        $(this).closest(".btnWrap").find(".updateBtn_1j1").show();
        $(this).closest(".btnWrap").find(".updateBtn_1j1").next().hide();
        check=false;
    })

    $(".updatePostBtn_1j1").on("click",function () {
       const id = $(this).next().find(".questionId").val();
       const content = $(this).closest(".btnWrap").prev().find(".studyQuestionContent_1j").val()
        if(!content){
            alert("ë¹ˆ ë‚´ìš©ì€ ë“±ë¡í•˜ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return;
        }
        if(content == globalThis.content){
            alert("ë³€ê²½ ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.")
            return;
        }
        $(this).parent().prev().find("textarea").attr("disabled", true)
            .css("height", "62px");
        $.ajax({
            url:"/quest/"+id,
            type:"post",
            data:{content:content},
            success:function (result) {
                alert("ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")
                $("#"+result.studyQuestionId).find("span.createdDate").html(result.createdDate);
                $("#"+result.studyQuestionId).find(".studyQuestionContent_1j").text(result.studyQuestionContent);
                check=false;
                globalThis.content=undefined;
                $("#"+result.studyQuestionId).find(".updatePostBtn_1j1").hide();
                $("#"+result.studyQuestionId).find(".cancelBtn_1j1").hide();
                $("#"+result.studyQuestionId).find(".updateBtn_1j1").show();
                $("#"+result.studyQuestionId).find(".deleteBtn_1j1").show();
            }
        })

    })

</script>
<script th:inline="javascript">
//ëŒ“ê¸€ ì‘ì„±
$(".replyPost_1j").on("click",function(){
    const id = $(this).closest(".feedUploadedSection").attr("id");
    const content = $(this).parent().prev().val();
    if(!content){
        alert("ë¹ˆ ë‚´ìš©ì€ ë“±ë¡í•˜ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
    }
    $.ajax({
        url:"/quest-reply/"+id,
        type:"post",
        data:{studyQuestionReplyContent:content,userId:userId},
        success:function(result){
            $("#"+id).find(".replyPostTextArea_1j").val("");
            show(id)
        }
    })
})

    // ëŒ“ê¸€ ëª©ë¡
$(".feedReply").on("click", function () {
    $(this).toggleClass('active');
    if($(this).hasClass('active')){
        $(this).text("ëŒ“ê¸€ ì—´ê¸°");
        $(this).parents('.feedUploadWrap').children('.replyWrap').css("display", "none");
    }else{
        $(this).text("ëŒ“ê¸€ ë‹«ê¸°");
        $(this).parents('.feedUploadWrap').children('.replyWrap').css("display", "flex");
        const id = $(this).closest(".feedUploadedSection").attr("id");
        show(id)
    }

})

    function show(obj){
        var id = obj;
        $.ajax({
            url:"/quest-reply/"+id,
            type:"get",
            success:showList
        })
    }

    function showList(result){
    let text='';
        $(result).each((i,item)=>{
            text += `<div class="top">`
            text += `<div class="left"><a href="#" target="_blank">`
            text += `<div class="profileThumb"><img loading="lazy" width="44px" src="`+item.studyQuestionReplyWriter.userFile+`" height="44px" alt="user_image"></div>`
            text += `</a></div>`
            text += `<div class="right">`
            text += `<h4 class="profileName">`+item.studyQuestionReplyWriter.userNickName
            text += `<div class="hoverView">`
            text += `<ul>`
            text += `<li><a href="#" target="_blank">í”„ë¡œí•„ ìƒì„¸</a></li>`
            text += `<li class="questionChat"><a>1:1 ëŒ€í™”</a></li>`
            text += `</ul>`
            text += `</div>`
            text += `</h4>`
            text += `<p class="dateTxt">`+item.createdDate+`</p></div>`
            text += `</div>`
            text += `<div class="bottom">`
            text += `<div class="left"></div>`
            text += `<div class="txtWrap"><textarea disabled="" maxlength="500" style="font-size: 0.875rem; height: 42px !important;">`+item.studyQuestionReplyContent+`</textarea>`
            text += `</div>`
            if(userId==item.studyQuestionReplyWriter.userId){
                text += `<div class="btnWrap">`
                text += `<button class="replyBtn txtBtn updateTry">ìˆ˜ì •</button>`
                text += `<button class="replyBtn txtBtn updatePost">ë“±ë¡</button>`
                text += `<div class="divider"><input type="hidden" id="replyId" value="`+item.studyQuestionReplyId+`"></div>`
                text += `<button class="replyBtn txtBtn cancelTry">ì·¨ì†Œ</button>`
                text += `<button class="replyBtn txtBtn deleteTry">ì‚­ì œ</button>`
                text += `</div>`
            }
            text += `</div>`
        })
        $("#"+result[0].studyQuestion.studyQuestionId).find(".replyWrapContent").html(text);
        $("#"+result[0].studyQuestion.studyQuestionId).find(".replayCount").text(result.length);
    }

//    ìˆ˜ì •

//    ì‚­ì œ
    globalThis.reply = undefined;
    var replyCheck =false;
    $(".replyWrapContent").on("click",".cancelTry",function () {
        $(this).parent().prev().find("textarea").attr("disabled", true)
            .css("height", "42px");
        $(this).hide();
        $(this).next().show();
        $(this).prev().prev().hide();
        $(this).prev().prev().prev().show();
        $(this).parent().prev().find("textarea").val( globalThis.reply);
        replyCheck=false;
    })

    $(".replyWrapContent").on("click",".updateTry",function () {
        if(!replyCheck){
            globalThis.reply = $(this).parent().prev().find("textarea").val();
            $(this).parent().prev().find("textarea").attr("disabled", false)
                .css("height", "62px");
            $(this).hide();
            $(this).next().show();
            $(this).next().next().next().show();
            $(this).next().next().next().next().hide();
            replyCheck=true
        }else{
            alert("í•œë²ˆì— í•˜ë‚˜ì˜ ëŒ“ê¸€ë§Œ ë‹¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
        }

    })



    $(".replyWrapContent").on("click",".deleteTry",function () {
        var id = $(this).prev().prev().find("#replyId").val();
        $("#questionIdForDelete2").val(id);
        $(".modalWrapOpen").show();
        $("#deleteModal_2j").show();
    })

    $("")


</script>

</html>